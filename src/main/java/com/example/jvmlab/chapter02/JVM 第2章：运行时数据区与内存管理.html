<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JVM ç¬¬2ç« ï¼šè¿è¡Œæ—¶æ•°æ®åŒºä¸å†…å­˜ç®¡ç†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #0a192f 0%, #112240 100%);
            color: #e6f1ff;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            font-size: 2.5em;
            margin: 30px 0;
            color: #64ffda;
            text-shadow: 0 0 20px rgba(100, 255, 218, 0.5);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            background: rgba(100, 255, 218, 0.1);
            border: 2px solid #64ffda;
            color: #64ffda;
            cursor: pointer;
            font-size: 16px;
            border-radius: 8px;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn:hover {
            background: rgba(100, 255, 218, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(100, 255, 218, 0.3);
        }

        .btn.active {
            background: #64ffda;
            color: #0a192f;
        }

        .scene-container {
            background: rgba(17, 34, 64, 0.6);
            border: 2px solid #233554;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            min-height: 600px;
            position: relative;
            backdrop-filter: blur(10px);
        }

        .scene {
            display: none;
        }

        .scene.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .memory-regions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .region {
            background: linear-gradient(135deg, rgba(100, 255, 218, 0.1) 0%, rgba(100, 255, 218, 0.05) 100%);
            border: 2px solid #64ffda;
            border-radius: 10px;
            padding: 20px;
            position: relative;
            transition: all 0.3s;
        }

        .region:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(100, 255, 218, 0.3);
        }

        .region-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #64ffda;
            margin-bottom: 5px;
        }

        .region-subtitle {
            font-size: 0.9em;
            color: #8892b0;
            margin-bottom: 15px;
        }

        .region-tag {
            display: inline-block;
            padding: 5px 10px;
            background: rgba(255, 107, 107, 0.2);
            border: 1px solid #ff6b6b;
            border-radius: 5px;
            font-size: 0.85em;
            margin-top: 10px;
        }

        .region-tag.shared {
            background: rgba(107, 203, 255, 0.2);
            border-color: #6bcbff;
        }

        .stack-frame {
            background: rgba(100, 255, 218, 0.1);
            border: 2px solid #64ffda;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            position: relative;
            animation: slideIn 0.5s;
        }

        @keyframes slideIn {
            from { transform: translateX(-50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .object-creation {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .step {
            text-align: center;
            padding: 20px;
            background: rgba(100, 255, 218, 0.1);
            border: 2px solid #64ffda;
            border-radius: 10px;
            width: 150px;
            margin: 10px;
            position: relative;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .step::after {
            content: 'â†’';
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2em;
            color: #64ffda;
        }

        .step:last-child::after {
            content: '';
        }

        .gc-visualization {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-top: 30px;
        }

        .gc-algorithm {
            background: rgba(100, 255, 218, 0.05);
            border: 2px solid #64ffda;
            border-radius: 10px;
            padding: 20px;
        }

        .object {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: #64ffda;
            border-radius: 5px;
            margin: 5px;
            transition: all 0.5s;
            position: relative;
        }

        .object.dead {
            background: #ff6b6b;
            opacity: 0.3;
        }

        .object.alive {
            background: #64ffda;
            box-shadow: 0 0 15px rgba(100, 255, 218, 0.8);
        }

        .generation-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 30px;
        }

        .generation {
            border: 2px solid #64ffda;
            border-radius: 10px;
            padding: 20px;
            background: rgba(100, 255, 218, 0.05);
        }

        .generation.young {
            border-color: #ffd700;
        }

        .generation.old {
            border-color: #ff6b6b;
        }

        .oom-card {
            background: rgba(255, 107, 107, 0.1);
            border: 2px solid #ff6b6b;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            animation: blink 1.5s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .flow-diagram {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .flow-node {
            background: rgba(100, 255, 218, 0.1);
            border: 2px solid #64ffda;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            min-width: 150px;
            position: relative;
            margin: 10px;
        }

        .arrow {
            font-size: 2em;
            color: #64ffda;
            margin: 0 10px;
        }

        .legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-box {
            width: 30px;
            height: 30px;
            border: 2px solid;
            border-radius: 5px;
        }

        .info-text {
            font-size: 1.1em;
            line-height: 1.8;
            color: #ccd6f6;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .object-creation {
                flex-direction: column;
            }

            .step::after {
                content: 'â†“';
                right: 50%;
                top: auto;
                bottom: -30px;
                transform: translateX(50%);
            }

            .gc-visualization {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <h1>JVM ç¬¬2ç« ï¼šè¿è¡Œæ—¶æ•°æ®åŒºä¸å†…å­˜ç®¡ç†</h1>

    <div class="controls">
        <button class="btn active" onclick="showScene(1)">1. è¿è¡Œæ—¶æ•°æ®åŒºæ€»è§ˆ</button>
        <button class="btn" onclick="showScene(2)">2. æ ˆå¸§ä¸æ–¹æ³•è°ƒç”¨</button>
        <button class="btn" onclick="showScene(3)">3. å¯¹è±¡åˆ›å»ºæµç¨‹</button>
        <button class="btn" onclick="showScene(4)">4. GC å¯è¾¾æ€§åˆ†æ</button>
        <button class="btn" onclick="showScene(5)">5. å›æ”¶ç®—æ³•å¯¹æ¯”</button>
        <button class="btn" onclick="showScene(6)">6. åˆ†ä»£æ”¶é›†</button>
        <button class="btn" onclick="showScene(7)">7. å…¸å‹ OOM</button>
        <button class="btn" onclick="showScene(8)">8. å®šä½æ€è·¯</button>
    </div>

    <div class="scene-container">
        <!-- Scene 1: è¿è¡Œæ—¶æ•°æ®åŒºæ€»è§ˆ -->
        <div class="scene active" id="scene1">
            <h2 style="color: #64ffda; margin-bottom: 20px;">è¿è¡Œæ—¶æ•°æ®åŒºæ€»è§ˆ / Runtime Data Areas</h2>
            <p class="info-text">JVM è¿è¡Œæ—¶æ•°æ®åŒºåˆ†ä¸ºçº¿ç¨‹ç§æœ‰åŒºåŸŸå’Œçº¿ç¨‹å…±äº«åŒºåŸŸï¼Œå„å¸å…¶èŒï¼š</p>

            <div class="memory-regions">
                <div class="region">
                    <div class="region-title">ç¨‹åºè®¡æ•°å™¨</div>
                    <div class="region-subtitle">Program Counter (PC)</div>
                    <p>è®°å½•å½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç è¡Œå·</p>
                    <div class="region-tag">çº¿ç¨‹ç§æœ‰ / Thread-Private</div>
                </div>

                <div class="region">
                    <div class="region-title">Java è™šæ‹Ÿæœºæ ˆ</div>
                    <div class="region-subtitle">JVM Stack</div>
                    <p>æ¯ä¸ªæ–¹æ³•æ‰§è¡Œåˆ›å»ºæ ˆå¸§ï¼Œå­˜å‚¨å±€éƒ¨å˜é‡ã€æ“ä½œæ•°æ ˆç­‰</p>
                    <div class="region-tag">çº¿ç¨‹ç§æœ‰ / Thread-Private</div>
                </div>

                <div class="region">
                    <div class="region-title">æœ¬åœ°æ–¹æ³•æ ˆ</div>
                    <div class="region-subtitle">Native Method Stack</div>
                    <p>ä¸º Native æ–¹æ³•æœåŠ¡</p>
                    <div class="region-tag">çº¿ç¨‹ç§æœ‰ / Thread-Private</div>
                </div>

                <div class="region">
                    <div class="region-title">å †</div>
                    <div class="region-subtitle">Heap</div>
                    <p>å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼ŒGC ä¸»è¦ç®¡ç†åŒºåŸŸ</p>
                    <div class="region-tag shared">çº¿ç¨‹å…±äº« / Shared</div>
                </div>

                <div class="region">
                    <div class="region-title">æ–¹æ³•åŒº / å…ƒç©ºé—´</div>
                    <div class="region-subtitle">Method Area / Metaspace</div>
                    <p>å­˜å‚¨ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡</p>
                    <div class="region-tag shared">çº¿ç¨‹å…±äº« / Shared</div>
                </div>

                <div class="region">
                    <div class="region-title">è¿è¡Œæ—¶å¸¸é‡æ± </div>
                    <div class="region-subtitle">Runtime Constant Pool</div>
                    <p>æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œå­˜æ”¾ç¼–è¯‘æœŸå¸¸é‡å’Œè¿è¡ŒæœŸå¸¸é‡</p>
                    <div class="region-tag shared">çº¿ç¨‹å…±äº« / Shared</div>
                </div>

                <div class="region">
                    <div class="region-title">ç›´æ¥å†…å­˜</div>
                    <div class="region-subtitle">Direct Memory</div>
                    <p>NIO ä½¿ç”¨çš„å †å¤–å†…å­˜</p>
                    <div class="region-tag shared">å †å¤– / Off-Heap</div>
                </div>
            </div>
        </div>

        <!-- Scene 2: æ ˆå¸§ä¸æ–¹æ³•è°ƒç”¨ -->
        <div class="scene" id="scene2">
            <h2 style="color: #64ffda; margin-bottom: 20px;">æ ˆå¸§ä¸æ–¹æ³•è°ƒç”¨ / Stack Frames</h2>
            <p class="info-text">æ¯æ¬¡æ–¹æ³•è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ŒåŒ…å«æ–¹æ³•æ‰§è¡Œæ‰€éœ€çš„å…¨éƒ¨ä¿¡æ¯ï¼š</p>

            <div style="margin-top: 30px;">
                <div class="stack-frame" style="animation-delay: 0s;">
                    <strong style="color: #64ffda;">æ ˆå¸§ 3: method_h()</strong>
                    <div style="margin-top: 10px;">
                        <div>ğŸ“¦ å±€éƒ¨å˜é‡è¡¨ / Local Variables</div>
                        <div>ğŸ”¢ æ“ä½œæ•°æ ˆ / Operand Stack</div>
                        <div>ğŸ”— åŠ¨æ€é“¾æ¥ / Dynamic Linking</div>
                        <div>â†©ï¸ è¿”å›åœ°å€ / Return Address</div>
                    </div>
                </div>

                <div class="stack-frame" style="animation-delay: 0.2s;">
                    <strong style="color: #64ffda;">æ ˆå¸§ 2: method_g()</strong>
                    <div style="margin-top: 10px;">
                        <div>ğŸ“¦ å±€éƒ¨å˜é‡è¡¨ / Local Variables</div>
                        <div>ğŸ”¢ æ“ä½œæ•°æ ˆ / Operand Stack</div>
                        <div>ğŸ”— åŠ¨æ€é“¾æ¥ / Dynamic Linking</div>
                        <div>â†©ï¸ è¿”å›åœ°å€ / Return Address</div>
                    </div>
                </div>

                <div class="stack-frame" style="animation-delay: 0.4s;">
                    <strong style="color: #64ffda;">æ ˆå¸§ 1: method_f()</strong>
                    <div style="margin-top: 10px;">
                        <div>ğŸ“¦ å±€éƒ¨å˜é‡è¡¨ / Local Variables</div>
                        <div>ğŸ”¢ æ“ä½œæ•°æ ˆ / Operand Stack</div>
                        <div>ğŸ”— åŠ¨æ€é“¾æ¥ / Dynamic Linking</div>
                        <div>â†©ï¸ è¿”å›åœ°å€ / Return Address</div>
                    </div>
                </div>

                <div class="stack-frame" style="animation-delay: 0.6s;">
                    <strong style="color: #64ffda;">æ ˆå¸§ 0: main()</strong>
                    <div style="margin-top: 10px;">
                        <div>ğŸ“¦ å±€éƒ¨å˜é‡è¡¨ / Local Variables</div>
                        <div>ğŸ”¢ æ“ä½œæ•°æ ˆ / Operand Stack</div>
                        <div>ğŸ”— åŠ¨æ€é“¾æ¥ / Dynamic Linking</div>
                        <div>â†©ï¸ è¿”å›åœ°å€ / Return Address</div>
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px; padding: 20px; background: rgba(255, 107, 107, 0.1); border: 2px solid #ff6b6b; border-radius: 10px;">
                <strong style="color: #ff6b6b;">âš ï¸ StackOverflowError</strong>
                <p style="margin-top: 10px;">é€’å½’è°ƒç”¨è¿‡æ·±æˆ–æ–¹æ³•è°ƒç”¨é“¾è¿‡é•¿æ—¶è§¦å‘</p>
            </div>
        </div>

        <!-- Scene 3: å¯¹è±¡åˆ›å»ºæµç¨‹ -->
        <div class="scene" id="scene3">
            <h2 style="color: #64ffda; margin-bottom: 20px;">å¯¹è±¡åˆ›å»ºçš„äº”æ­¥ / Object Creation Lifecycle</h2>

            <div class="object-creation">
                <div class="step" style="animation-delay: 0s;">
                    <div style="font-size: 2em;">1ï¸âƒ£</div>
                    <strong>ç±»åŠ è½½æ£€æŸ¥</strong>
                    <p style="font-size: 0.9em; margin-top: 5px;">Class Loading Check</p>
                </div>

                <div class="step" style="animation-delay: 0.3s;">
                    <div style="font-size: 2em;">2ï¸âƒ£</div>
                    <strong>åˆ†é…å†…å­˜</strong>
                    <p style="font-size: 0.9em; margin-top: 5px;">Allocate Memory</p>
                    <p style="font-size: 0.8em; margin-top: 5px; color: #8892b0;">æŒ‡é’ˆç¢°æ’ / ç©ºé—²åˆ—è¡¨</p>
                </div>

                <div class="step" style="animation-delay: 0.6s;">
                    <div style="font-size: 2em;">3ï¸âƒ£</div>
                    <strong>å†…å­˜æ¸…é›¶</strong>
                    <p style="font-size: 0.9em; margin-top: 5px;">Zero Memory</p>
                </div>

                <div class="step" style="animation-delay: 0.9s;">
                    <div style="font-size: 2em;">4ï¸âƒ£</div>
                    <strong>è®¾ç½®å¯¹è±¡å¤´</strong>
                    <p style="font-size: 0.9em; margin-top: 5px;">Set Object Header</p>
                    <p style="font-size: 0.8em; margin-top: 5px; color: #8892b0;">Klass / Hash / GC æ ‡è®°</p>
                </div>

                <div class="step" style="animation-delay: 1.2s;">
                    <div style="font-size: 2em;">5ï¸âƒ£</div>
                    <strong>æ‰§è¡Œ init</strong>
                    <p style="font-size: 0.9em; margin-top: 5px;">Execute &lt;init&gt;</p>
                </div>
            </div>

            <div style="margin-top: 40px; text-align: center; font-size: 1.2em;">
                <p style="color: #64ffda;">âœ… å¯¹è±¡åˆ›å»ºå®Œæˆï¼Œå¼•ç”¨è¿”å›åˆ°æ ˆå¸§å±€éƒ¨å˜é‡è¡¨</p>
            </div>
        </div>

        <!-- Scene 4: GC å¯è¾¾æ€§åˆ†æ -->
        <div class="scene" id="scene4">
            <h2 style="color: #64ffda; margin-bottom: 20px;">GC å¯è¾¾æ€§åˆ†æ / Reachability Analysis</h2>
            <p class="info-text">ä» GC Roots å‡ºå‘ï¼Œé€šè¿‡å¼•ç”¨é“¾åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»ï¼š</p>

            <div style="margin-top: 30px; background: rgba(100, 255, 218, 0.05); padding: 30px; border-radius: 10px; border: 2px solid #64ffda;">
                <h3 style="color: #64ffda; margin-bottom: 20px;">GC Roots åŒ…æ‹¬ï¼š</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div style="padding: 15px; background: rgba(100, 255, 218, 0.1); border-radius: 8px;">
                        <strong>ğŸ”¸ æ ˆå¸§å±€éƒ¨å˜é‡</strong>
                        <p style="font-size: 0.9em; margin-top: 5px;">Stack Locals</p>
                    </div>
                    <div style="padding: 15px; background: rgba(100, 255, 218, 0.1); border-radius: 8px;">
                        <strong>ğŸ”¸ æ–¹æ³•åŒºé™æ€å­—æ®µ</strong>
                        <p style="font-size: 0.9em; margin-top: 5px;">Static Fields</p>
                    </div>
                    <div style="padding: 15px; background: rgba(100, 255, 218, 0.1); border-radius: 8px;">
                        <strong>ğŸ”¸ æ–¹æ³•åŒºå¸¸é‡</strong>
                        <p style="font-size: 0.9em; margin-top: 5px;">Constants</p>
                    </div>
                    <div style="padding: 15px; background: rgba(100, 255, 218, 0.1); border-radius: 8px;">
                        <strong>ğŸ”¸ æœ¬åœ°æ–¹æ³•å¼•ç”¨</strong>
                        <p style="font-size: 0.9em; margin-top: 5px;">JNI References</p>
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px; text-align: center;">
                <div style="display: inline-flex; gap: 30px; align-items: center;">
                    <div>
                        <div class="object alive" style="width: 60px; height: 60px; display: inline-block;"></div>
                        <p style="margin-top: 10px;">å¯è¾¾å¯¹è±¡ / Reachable</p>
                    </div>
                    <div style="font-size: 2em; color: #64ffda;">âš¡</div>
                    <div>
                        <div class="object dead" style="width: 60px; height: 60px; display: inline-block;"></div>
                        <p style="margin-top: 10px;">ä¸å¯è¾¾å¯¹è±¡ / Unreachable</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scene 5: å›æ”¶ç®—æ³•å¯¹æ¯” -->
        <div class="scene" id="scene5">
            <h2 style="color: #64ffda; margin-bottom: 20px;">å›æ”¶ç®—æ³•å¯¹æ¯” / GC Algorithms</h2>

            <div class="gc-visualization">
                <div class="gc-algorithm">
                    <h3 style="color: #64ffda; margin-bottom: 15px;">æ ‡è®°-æ¸…é™¤ / Mark-Sweep</h3>
                    <div style="margin: 20px 0;">
                        <div class="object alive"></div>
                        <div class="object dead"></div>
                        <div class="object alive"></div>
                        <div class="object dead"></div>
                        <div class="object alive"></div>
                    </div>
                    <p style="color: #8892b0;">ä¼˜ç‚¹ï¼šç®€å•ç›´æ¥</p>
                    <p style="color: #8892b0;">ç¼ºç‚¹ï¼šäº§ç”Ÿç¢ç‰‡</p>
                </div>

                <div class="gc-algorithm">
                    <h3 style="color: #64ffda; margin-bottom: 15px;">å¤åˆ¶ç®—æ³• / Copying</h3>
                    <div style="margin: 20px 0;">
                        <div style="display: flex; gap: 20px;">
                            <div style="flex: 1; border: 2px dashed #64ffda; padding: 10px; border-radius: 5px;">
                                <p style="font-size: 0.9em; margin-bottom: 10px;">From åŒº</p>
                                <div class="object alive"></div>
                                <div class="object dead"></div>
                            </div>
                            <div style="font-size: 2em; color: #64ffda;">â†’</div>
                            <div style="flex: 1; border: 2px dashed #64ffda; padding: 10px; border-radius: 5px;">
                                <p style="font-size: 0.9em; margin-bottom: 10px;">To åŒº</p>
                                <div class="object alive"></div>
                            </div>
                        </div>
                    </div>
                    <p style="color: #8892b0;">ä¼˜ç‚¹ï¼šæ— ç¢ç‰‡ã€å¿«é€Ÿ</p>
                    <p style="color: #8892b0;">ç¼ºç‚¹ï¼šç©ºé—´æµªè´¹</p>
                </div>

                <div class="gc-algorithm">
                    <h3 style="color: #64ffda; margin-bottom: 15px;">æ ‡è®°-æ•´ç† / Mark-Compact</h3>
                    <div style="margin: 20px 0;">
                        <div class="object alive"></div>
                        <div class="object alive"></div>
                        <div class="object alive"></div>
                    </div>
                    <p style="color: #8892b0;">ä¼˜ç‚¹ï¼šæ— ç¢ç‰‡ã€ç©ºé—´åˆ©ç”¨é«˜</p>
                    <p style="color: #8892b0;">ç¼ºç‚¹ï¼šç§»åŠ¨å¯¹è±¡å¼€é”€å¤§</p>
                </div>

                <div class="gc-algorithm">
                    <h3 style="color: #64ffda; margin-bottom: 15px;">åˆ†ä»£æ”¶é›† / Generational</h3>
                    <div style="margin: 20px 0;">
                        <div style="border: 2px solid #ffd700; padding: 10px; border-radius: 5px; margin-bottom: 10px;">
                            <p style="font-size: 0.9em; color: #ffd700;">æ–°ç”Ÿä»£: å¤åˆ¶ç®—æ³•</p>
                        </div>
                        <div style="border: 2px solid #ff6b6b; padding: 10px; border-radius: 5px;">
                            <p style="font-size: 0.9em; color: #ff6b6b;">è€å¹´ä»£: æ ‡è®°-æ•´ç†</p>
                        </div>
                    </div>
                    <p style="color: #8892b0;">ä¼˜ç‚¹ï¼šé’ˆå¯¹æ€§ä¼˜åŒ–</p>
                    <p style="color: #8892b0;">ç»“åˆå„ç®—æ³•ä¼˜åŠ¿</p>
                </div>
            </div>
        </div>

        <!-- Scene 6: åˆ†ä»£æ”¶é›† -->
        <div class="scene" id="scene6">
            <h2 style="color: #64ffda; margin-bottom: 20px;">åˆ†ä»£æ”¶é›†ä¸æ™‹å‡ / Generational Collection</h2>

            <div class="generation-container">
                <div class="generation young" style="border-color: #ffd700;">
                    <h3 style="color: #ffd700; margin-bottom: 15px;">æ–°ç”Ÿä»£ / Young Generation</h3>
                    <div style="display: grid; grid-template-columns: 4fr 1fr 1fr; gap: 10px;">
                        <div style="border: 2px dashed #ffd700; padding: 15px; border-radius: 8px;">
                            <strong>Eden åŒº</strong>
                            <p style="font-size: 0.9em; margin-top: 5px;">æ–°å¯¹è±¡åˆ†é…åŒºåŸŸ</p>
                            <div style="margin-top: 10px;">
                                <div class="object" style="background: #ffd700;"></div>
                                <div class="object" style="background: #ffd700;"></div>
                                <div class="object" style="background: #ffd700;"></div>
                            </div>
                        </div>
                        <div style="border: 2px dashed #ffd700; padding: 15px; border-radius: 8px;">
                            <strong>S0</strong>
                            <p style="font-size: 0.9em; margin-top: 5px;">Survivor</p>
                            <div style="margin-top: 10px;">
                                <div class="object" style="background: #ffd700;"></div>
                            </div>
                        </div>
                        <div style="border: 2px dashed #ffd700; padding: 15px; border-radius: 8px;">
                            <strong>S1</strong>
                            <p style="font-size: 0.9em; margin-top: 5px;">Survivor</p>
                        </div>
                    </div>
                    <p style="margin-top: 15px; color: #8892b0;">âœ¨ Minor GCï¼šå¤åˆ¶ç®—æ³•ï¼Œå¿«é€Ÿå›æ”¶</p>
                </div>

                <div style="text-align: center; font-size: 2em; color: #64ffda; margin: 20px 0;">â¬‡ï¸ æ™‹å‡ / Promotion â¬‡ï¸</div>

                <div class="generation old" style="border-color: #ff6b6b;">
                    <h3 style="color: #ff6b6b; margin-bottom: 15px;">è€å¹´ä»£ / Old Generation</h3>
                    <div style="border: 2px dashed #ff6b6b; padding: 20px; border-radius: 8px;">
                        <p style="margin-bottom: 15px;">é•¿æœŸå­˜æ´»å¯¹è±¡ï¼ˆå¹´é¾„ â‰¥ 15ï¼‰æˆ–å¤§å¯¹è±¡ç›´æ¥è¿›å…¥</p>
                        <div>
                            <div class="object" style="background: #ff6b6b;"></div>
                            <div class="object" style="background: #ff6b6b;"></div>
                            <div class="object" style="background: #ff6b6b;"></div>
                            <div class="object" style="background: #ff6b6b;"></div>
                        </div>
                    </div>
                    <p style="margin-top: 15px; color: #8892b0;">ğŸ”¥ Major/Full GCï¼šæ ‡è®°-æ•´ç†ï¼Œæš‚åœæ—¶é—´é•¿</p>
                </div>
            </div>

            <div style="margin-top: 30px; padding: 20px; background: rgba(100, 255, 218, 0.1); border: 2px solid #64ffda; border-radius: 10px;">
                <h4 style="color: #64ffda; margin-bottom: 10px;">æ™‹å‡æ¡ä»¶ï¼š</h4>
                <ul style="list-style: none; padding: 0;">
                    <li style="margin: 8px 0;">âœ“ å¯¹è±¡å¹´é¾„è¾¾åˆ°æ™‹å‡é˜ˆå€¼ï¼ˆé»˜è®¤ 15ï¼‰</li>
                    <li style="margin: 8px 0;">âœ“ å¤§å¯¹è±¡ç›´æ¥åˆ†é…åˆ°è€å¹´ä»£</li>
                    <li style="margin: 8px 0;">âœ“ Survivor åŒºç©ºé—´ä¸è¶³</li>
                    <li style="margin: 8px 0;">âœ“ åŠ¨æ€å¹´é¾„åˆ¤å®š</li>
                </ul>
            </div>
        </div>

        <!-- Scene 7: å…¸å‹ OOM -->
        <div class="scene" id="scene7">
            <h2 style="color: #64ffda; margin-bottom: 20px;">å…¸å‹ OOM åœºæ™¯ / OutOfMemoryError</h2>

            <div class="oom-card">
                <h3 style="color: #ff6b6b; margin-bottom: 10px;">âš ï¸ Java Heap Space</h3>
                <p style="margin: 10px 0;"><strong>è§¦å‘æ¡ä»¶ï¼š</strong>å †å†…å­˜ä¸è¶³ï¼Œæ— æ³•åˆ†é…æ–°å¯¹è±¡</p>
                <p style="margin: 10px 0;"><strong>å¸¸è§åŸå› ï¼š</strong></p>
                <ul style="margin-left: 20px; margin-top: 5px;">
                    <li>å†…å­˜æ³„æ¼ï¼ˆå¯¹è±¡æ— æ³•å›æ”¶ï¼‰</li>
                    <li>å¤§å¯¹è±¡æŒç»­åˆ†é…</li>
                    <li>ç¼“å­˜è†¨èƒ€</li>
                    <li>å †å¤§å°è®¾ç½®è¿‡å°</li>
                </ul>
            </div>

            <div class="oom-card" style="animation-delay: 0.3s;">
                <h3 style="color: #ff6b6b; margin-bottom: 10px;">âš ï¸ GC Overhead Limit Exceeded</h3>
                <p style="margin: 10px 0;"><strong>è§¦å‘æ¡ä»¶ï¼š</strong>98% çš„æ—¶é—´ç”¨äº GCï¼Œä½†åªå›æ”¶ä¸åˆ° 2% çš„å †</p>
                <p style="margin: 10px 0;"><strong>å¸¸è§åŸå› ï¼š</strong></p>
                <ul style="margin-left: 20px; margin-top: 5px;">
                    <li>å †ç©ºé—´å‡ ä¹è€—å°½</li>
                    <li>é¢‘ç¹ Full GC ä½†æ•ˆæœç”šå¾®</li>
                    <li>å­˜åœ¨å†…å­˜æ³„æ¼</li>
                </ul>
            </div>

            <div class="oom-card" style="animation-delay: 0.6s;">
                <h3 style="color: #ff6b6b; margin-bottom: 10px;">âš ï¸ Metaspace / PermGen Space</h3>
                <p style="margin: 10px 0;"><strong>è§¦å‘æ¡ä»¶ï¼š</strong>æ–¹æ³•åŒº/å…ƒç©ºé—´å†…å­˜ä¸è¶³</p>
                <p style="margin: 10px 0;"><strong>å¸¸è§åŸå› ï¼š</strong></p>
                <ul style="margin-left: 20px; margin-top: 5px;">
                    <li>åŠ¨æ€ç”Ÿæˆå¤§é‡ç±»ï¼ˆå¦‚ CGLibã€åŠ¨æ€ä»£ç†ï¼‰</li>
                    <li>åŠ è½½å¤§é‡ç¬¬ä¸‰æ–¹åº“</li>
                    <li>ç±»åŠ è½½å™¨æ³„æ¼</li>
                    <li>å…ƒç©ºé—´å¤§å°é™åˆ¶è¿‡å°</li>
                </ul>
            </div>

            <div class="oom-card" style="animation-delay: 0.9s;">
                <h3 style="color: #ff6b6b; margin-bottom: 10px;">âš ï¸ Direct Buffer Memory</h3>
                <p style="margin: 10px 0;"><strong>è§¦å‘æ¡ä»¶ï¼š</strong>NIO ç›´æ¥å†…å­˜ï¼ˆå †å¤–å†…å­˜ï¼‰ä¸è¶³</p>
                <p style="margin: 10px 0;"><strong>å¸¸è§åŸå› ï¼š</strong></p>
                <ul style="margin-left: 20px; margin-top: 5px;">
                    <li>å¤§é‡ä½¿ç”¨ DirectByteBuffer</li>
                    <li>NIO/Netty ä½¿ç”¨ä¸å½“</li>
                    <li>ç›´æ¥å†…å­˜æœªåŠæ—¶é‡Šæ”¾</li>
                    <li>-XX:MaxDirectMemorySize è®¾ç½®è¿‡å°</li>
                </ul>
            </div>
        </div>

        <!-- Scene 8: å®šä½æ€è·¯ -->
        <div class="scene" id="scene8">
            <h2 style="color: #64ffda; margin-bottom: 20px;">OOM å®šä½æ€è·¯ / Troubleshooting</h2>

            <div class="flow-diagram">
                <div class="flow-node">
                    <div style="font-size: 2em; margin-bottom: 10px;">ğŸš¨</div>
                    <strong>OOM å‘Šè­¦</strong>
                    <p style="font-size: 0.9em; margin-top: 5px;">Alert</p>
                </div>
                <div class="arrow">â†’</div>

                <div class="flow-node">
                    <div style="font-size: 2em; margin-bottom: 10px;">ğŸ“Š</div>
                    <strong>åŸºç¡€ç”»åƒ</strong>
                    <p style="font-size: 0.9em; margin-top: 5px;">Profile</p>
                    <p style="font-size: 0.85em; color: #8892b0; margin-top: 5px;">å †å¤§å°/GCæ¬¡æ•°/æ™‹å‡é€Ÿç‡</p>
                </div>
                <div class="arrow">â†’</div>

                <div class="flow-node">
                    <div style="font-size: 2em; margin-bottom: 10px;">ğŸ’¾</div>
                    <strong>é‡‡æ ·/è½¬å‚¨</strong>
                    <p style="font-size: 0.9em; margin-top: 5px;">Dump</p>
                    <p style="font-size: 0.85em; color: #8892b0; margin-top: 5px;">jmap/JFR/Heap Dump</p>
                </div>
                <div class="arrow">â†’</div>

                <div class="flow-node">
                    <div style="font-size: 2em; margin-bottom: 10px;">ğŸ”</div>
                    <strong>åˆ†æçƒ­ç‚¹</strong>
                    <p style="font-size: 0.9em; margin-top: 5px;">Analyze</p>
                    <p style="font-size: 0.85em; color: #8892b0; margin-top: 5px;">å¤§å¯¹è±¡/ç±»åŠ è½½/æ³„æ¼ç‚¹</p>
                </div>
                <div class="arrow">â†’</div>

                <div class="flow-node">
                    <div style="font-size: 2em; margin-bottom: 10px;">ğŸ”§</div>
                    <strong>ä¿®å¤ç­–ç•¥</strong>
                    <p style="font-size: 0.9em; margin-top: 5px;">Fix</p>
                    <p style="font-size: 0.85em; color: #8892b0; margin-top: 5px;">é™æµ/æ± åŒ–/å‚æ•°è°ƒä¼˜</p>
                </div>
            </div>

            <div style="margin-top: 40px;">
                <h3 style="color: #64ffda; margin-bottom: 20px;">å¸¸ç”¨å·¥å…·ä¸å‘½ä»¤ï¼š</h3>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div style="background: rgba(100, 255, 218, 0.1); padding: 20px; border-radius: 10px; border: 2px solid #64ffda;">
                        <strong style="color: #64ffda;">ç›‘æ§å·¥å…·</strong>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>jstat - GC ç»Ÿè®¡ä¿¡æ¯</li>
                            <li>jmap - å †è½¬å‚¨</li>
                            <li>jstack - çº¿ç¨‹å¿«ç…§</li>
                            <li>JConsole / VisualVM</li>
                        </ul>
                    </div>

                    <div style="background: rgba(100, 255, 218, 0.1); padding: 20px; border-radius: 10px; border: 2px solid #64ffda;">
                        <strong style="color: #64ffda;">åˆ†æå·¥å…·</strong>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>MAT - å†…å­˜åˆ†æ</li>
                            <li>JProfiler</li>
                            <li>Arthas - åœ¨çº¿è¯Šæ–­</li>
                            <li>GC æ—¥å¿—åˆ†æå·¥å…·</li>
                        </ul>
                    </div>

                    <div style="background: rgba(100, 255, 218, 0.1); padding: 20px; border-radius: 10px; border: 2px solid #64ffda;">
                        <strong style="color: #64ffda;">JVM å‚æ•°</strong>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>-Xms / -Xmx - å †å¤§å°</li>
                            <li>-XX:MaxMetaspaceSize</li>
                            <li>-XX:MaxDirectMemorySize</li>
                            <li>-XX:+HeapDumpOnOutOfMemoryError</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px; padding: 20px; background: rgba(100, 255, 218, 0.1); border: 2px solid #64ffda; border-radius: 10px;">
                <h4 style="color: #64ffda; margin-bottom: 15px;">ğŸ¯ å®šä½å…³é”®ç‚¹ï¼š</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div>âœ“ æ‰¾å‡ºå†…å­˜å ç”¨æœ€å¤§çš„å¯¹è±¡</div>
                    <div>âœ“ åˆ†æå¯¹è±¡å¼•ç”¨é“¾</div>
                    <div>âœ“ æŸ¥çœ‹ GC æ—¥å¿—æ¨¡å¼</div>
                    <div>âœ“ ç›‘æ§å†…å­˜å¢é•¿è¶‹åŠ¿</div>
                    <div>âœ“ æ£€æŸ¥ç±»åŠ è½½å™¨æ³„æ¼</div>
                    <div>âœ“ éªŒè¯ç›´æ¥å†…å­˜ä½¿ç”¨</div>
                </div>
            </div>
        </div>
    </div>

    <div class="legend">
        <div class="legend-item">
            <div class="legend-box" style="background: rgba(100, 255, 218, 0.3); border-color: #64ffda;"></div>
            <span>çº¿ç¨‹ç§æœ‰ / Thread-Private</span>
        </div>
        <div class="legend-item">
            <div class="legend-box" style="background: rgba(107, 203, 255, 0.3); border-color: #6bcbff;"></div>
            <span>çº¿ç¨‹å…±äº« / Shared</span>
        </div>
        <div class="legend-item">
            <div class="legend-box" style="background: rgba(255, 107, 107, 0.3); border-color: #ff6b6b;"></div>
            <span>å¼‚å¸¸çŠ¶æ€ / Error</span>
        </div>
    </div>

    <div style="text-align: center; margin-top: 40px; padding: 30px; background: rgba(100, 255, 218, 0.05); border-radius: 10px;">
        <h3 style="color: #64ffda; margin-bottom: 15px;">ç¬¬2ç« æ ¸å¿ƒå›é¡¾ / Chapter 2 Recap</h3>
        <div style="max-width: 800px; margin: 0 auto; text-align: left;">
            <p style="margin: 10px 0; font-size: 1.1em;">âœ“ è¿è¡Œæ—¶æ•°æ®åŒºï¼šç†è§£çº¿ç¨‹ç§æœ‰ä¸å…±äº«åŒºåŸŸçš„èŒè´£è¾¹ç•Œ</p>
            <p style="margin: 10px 0; font-size: 1.1em;">âœ“ å¯¹è±¡ç”Ÿå‘½å‘¨æœŸï¼šä»åˆ›å»ºã€å¯è¾¾æ€§åˆ†æåˆ°å›æ”¶çš„å®Œæ•´æµç¨‹</p>
            <p style="margin: 10px 0; font-size: 1.1em;">âœ“ GC ç­–ç•¥ï¼šåˆ†ä»£æ”¶é›†ç»“åˆä¸åŒç®—æ³•ï¼Œå¹³è¡¡ååä¸æš‚åœ</p>
            <p style="margin: 10px 0; font-size: 1.1em;">âœ“ OOM å®šä½ï¼šä»å‘Šè­¦åˆ°ç”»åƒã€è½¬å‚¨ã€åˆ†æã€ä¿®å¤çš„å®Œæ•´é“¾è·¯</p>
        </div>
    </div>
</div>

<script>
    function showScene(sceneNumber) {
        // éšè—æ‰€æœ‰åœºæ™¯
        const scenes = document.querySelectorAll('.scene');
        scenes.forEach(scene => scene.classList.remove('active'));

        // æ˜¾ç¤ºé€‰ä¸­çš„åœºæ™¯
        const targetScene = document.getElementById('scene' + sceneNumber);
        if (targetScene) {
            targetScene.classList.add('active');
        }

        // æ›´æ–°æŒ‰é’®çŠ¶æ€
        const buttons = document.querySelectorAll('.btn');
        buttons.forEach((btn, index) => {
            if (index + 1 === sceneNumber) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });
    }

    // æ·»åŠ é”®ç›˜å¿«æ·é”®æ”¯æŒ
    document.addEventListener('keydown', function(e) {
        const currentScene = document.querySelector('.scene.active');
        const sceneId = currentScene ? parseInt(currentScene.id.replace('scene', '')) : 1;

        if (e.key === 'ArrowRight' && sceneId < 8) {
            showScene(sceneId + 1);
        } else if (e.key === 'ArrowLeft' && sceneId > 1) {
            showScene(sceneId - 1);
        }
    });

    // æ·»åŠ å¯¹è±¡åŠ¨ç”»æ•ˆæœ
    setInterval(() => {
        const objects = document.querySelectorAll('.object.alive');
        objects.forEach(obj => {
            const randomDelay = Math.random() * 2;
            obj.style.animationDelay = randomDelay + 's';
        });
    }, 3000);
</script>
</body>
</html>